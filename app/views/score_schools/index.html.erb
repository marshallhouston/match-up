<div class="flex p1 justify-center">
  <h1 class='bold'> You're a <%= @status %> applicant at these schools. </h1>
</div>

<div class="clearfix flex p1 justify-around border">
  <div class="sm-col-2-left">
    <h1 class='bold'> <%= link_to "Scorecard", admission_score_path(@admission_score) %></h1>
  </div>
  <div class="admission-index-score p1 score border flex flex-column sm-col-5-right">
    <h2 class='h2 bold m1 p0 flex justify-center'>Your Score</h2>
    <h3 id='admissionScore' class='h2 bold m1 p0 flex justify-center'><%= @admission_score.admission_index_score %></h3>
  </div>
  <div id="chart_div" class='' style="width: 120px; height: 120px;"></div>
</div>

<div class="schools flex p1 justify-around flex-wrap">
  <% @schools.each do |school| %>
  <div class="school border col-4 m1">
    <h3 class='h5 h0-responsive caps mt3 mb0 regular flex justify-center'><%= school.name %></h3>
    <h5 class='h0-responsive mt1 mb2 regular flex justify-center'>Minimum Admission Score: <%= school.min_admission_score %></h5>
  </div>
  <% end %>
</div>

<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">

google.charts.load('current', {'packages':['gauge']});
google.charts.setOnLoadCallback(drawChart);

function drawChart() {

  var admissionScore = $('#admissionScore').html();

  var data1 = google.visualization.arrayToDataTable([
    ['Label', 'Value'],
    ['Your Score', 0]
  ]);

  var data2 = google.visualization.arrayToDataTable([
    ['Label', 'Value'],
    ['Your Score', parseInt(admissionScore)]
  ]);

  var options = {
    width: 400, height: 120,
    redFrom: 45, redTo: 75,
    yellowFrom:75, yellowTo: 90,
    greenFrom:90, greenTo: 146,
    minorTicks: 10,
    min: 45,
    max: 146
  };

  var chart = new google.visualization.Gauge(document.getElementById('chart_div'));

  chart.draw(data1, options);
  chart.draw(data2, options);
}
</script>
